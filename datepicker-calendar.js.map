{"version":3,"file":"datepicker-calendar.js","sourceRoot":"","sources":["src/datepicker-calendar.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, PropertyValues } from 'lit'\nimport { customElement, property, state } from 'lit/decorators.js'\nimport { repeat } from 'lit/directives/repeat.js'\nimport { styles } from './datepicker-calendar.css'\n\n/**\n * A Datepicker-calendar.\n *\n * @fires selected-date-changed - Indicates when the count changes\n * @slot - This element has a slot\n */\n@customElement('datepicker-calendar')\nexport class DatepickerCalendar extends LitElement {\n  static override styles = styles\n\n  static override get observedAttributes() {\n    return ['selected-date']\n  }\n\n  override attributeChangedCallback(\n    name: string,\n    oldVal: string,\n    newVal: string\n  ) {\n    if (name === 'selected-date' && oldVal !== newVal) {\n      this.selectedDate = new Date(newVal)\n    }\n  }\n\n  @state()\n  numberOfDays = 0\n\n  @state()\n  numberOfDaysLastMonth = 0\n\n  @property()\n  selectedDate: Date | undefined = undefined\n\n  @property({ type: Number })\n  firstDayOfWeek = 0\n\n  @property({ type: Object })\n  date = new Date()\n\n  @property({ reflect: true })\n  locale = 'en-US'\n\n  override willUpdate(changedProperties: PropertyValues<this>) {\n    // only need to check changed properties for an expensive computation.\n    if (changedProperties.has('date')) {\n      // Check that this.date is a date object\n      if (!(this.date instanceof Date)) {\n        console.log('Error: Date is ', this.date)\n        this.date = new Date()\n      }\n      // calculate month with days for the app.\n      console.log('changedProperties', changedProperties)\n      this.numberOfDays = new Date(\n        this.date.getFullYear(),\n        this.date.getMonth() + 1,\n        0\n      ).getDate()\n      this.numberOfDaysLastMonth = new Date(\n        this.date.getFullYear(),\n        this.date.getMonth(),\n        0\n      ).getDate()\n    }\n  }\n\n  override render() {\n    return html`\n      <div class=\"calendar-head\">\n        <div class=\"calendar-head__controls\">\n          <button\n            @click=\"${() => {\n              console.log('clicked')\n              this.dispatchEvent(\n                new Event('prev-month', { bubbles: true, composed: true })\n              )\n            }}\"\n          >\n            <div aria-hidden=\"true\" data-comp=\"icon\"\n              ><svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n                focusable=\"false\"\n                height=\"100%\"\n                width=\"100%\"\n              >\n                <path\n                  d=\"M12.69 14.161 8.564 9.995l4.124-4.167a1.077 1.077 0 0 0 0-1.514 1.051 1.051 0 0 0-1.499 0L6.31 9.243a1.077 1.077 0 0 0 0 1.514l4.88 4.929a1.051 1.051 0 0 0 1.5 0 1.1 1.1 0 0 0 0-1.525Z\"\n                ></path></svg\n            ></div>\n          </button>\n          <button\n            @click=\"${() =>\n              this.dispatchEvent(\n                new Event('prev-year', { bubbles: true, composed: true })\n              )}\"\n          >\n            <div aria-hidden=\"true\" data-comp=\"icon\"\n              ><svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n                focusable=\"false\"\n                height=\"100%\"\n                width=\"100%\"\n              >\n                <path\n                  d=\"M9.487 4.788a.97.97 0 0 1 0 1.398l-4 3.819 4 3.82a.95.95 0 0 1 0 1.387 1.061 1.061 0 0 1-1.453 0l-4.732-4.518a.95.95 0 0 1 0-1.388l4.732-4.518a1.061 1.061 0 0 1 1.453 0Zm7.211 0a.97.97 0 0 1 0 1.398l-4 3.819 4 3.82a.95.95 0 0 1 0 1.387 1.061 1.061 0 0 1-1.453 0l-4.732-4.518a.95.95 0 0 1 0-1.388l4.732-4.518a1.061 1.061 0 0 1 1.453 0Z\"\n                ></path></svg\n            ></div>\n          </button>\n        </div>\n        <h4>\n          ${this.date.toLocaleString(this.locale, { month: 'long' })}\n          ${this.date.getFullYear()}\n        </h4>\n        <div class=\"calendar-head__controls\">\n          <button\n            @click=\"${() =>\n              this.dispatchEvent(\n                new Event('next-year', { bubbles: true, composed: true })\n              )}\"\n          >\n            <div aria-hidden=\"true\" data-comp=\"icon\"\n              ><svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n                focusable=\"false\"\n                height=\"100%\"\n                width=\"100%\"\n              >\n                <path\n                  d=\"m11.966 4.788 4.732 4.518a.95.95 0 0 1 0 1.388l-4.732 4.518a1.061 1.061 0 0 1-1.453 0 .97.97 0 0 1 0-1.398l4-3.819-4-3.82a.95.95 0 0 1 0-1.387 1.061 1.061 0 0 1 1.453 0Zm-7.21 0 4.731 4.518a.95.95 0 0 1 0 1.388l-4.732 4.518a1.061 1.061 0 0 1-1.453 0 .97.97 0 0 1 0-1.398l4-3.819-4-3.82a.95.95 0 0 1 0-1.387 1.061 1.061 0 0 1 1.453 0Z\"\n                ></path></svg\n            ></div>\n          </button>\n          <button\n            @click=\"${() =>\n              this.dispatchEvent(\n                new Event('next-month', { bubbles: true, composed: true })\n              )}\"\n          >\n            <div aria-hidden=\"true\" data-comp=\"icon\"\n              ><svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n                focusable=\"false\"\n                height=\"100%\"\n                width=\"100%\"\n              >\n                <path\n                  d=\"m7.31 5.839 4.125 4.166-4.124 4.167a1.077 1.077 0 0 0 0 1.514 1.051 1.051 0 0 0 1.499 0l4.88-4.929a1.077 1.077 0 0 0 0-1.514L8.81 4.314a1.051 1.051 0 0 0-1.5 0 1.1 1.1 0 0 0 0 1.525Z\"\n                ></path></svg\n            ></div>\n          </button>\n        </div>\n      </div>\n      <!--p\n        >Days in\n        ${this.date.toLocaleString(this.locale, {\n        month: 'long',\n      })}:\n        ${this.numberOfDays}<br />\n        Previous month had: ${this.numberOfDaysLastMonth} <br />First of the\n        month occurs on a:\n        ${new Date(\n        this.date.getFullYear(),\n        this.date.getMonth(),\n        1\n      ).toLocaleString(this.locale, {\n        weekday: 'long',\n      })}\n        = ${this.calendarMonthStartsOn()}\n        <br />\n        Selected date:\n        <b>\n          ${this.selectedDate\n        ? this.selectedDate?.toLocaleString(this.locale, {\n            month: 'long',\n            day: 'numeric',\n            year: 'numeric',\n          })\n        : 'none'}</b\n        >\n      </p -->\n\n      <!-- weekdays -->\n      <ul class=\"weekdays grid\">\n        ${repeat(\n          Array.from({ length: 7 }, (_, i) => i),\n          (day) => day,\n          (day) => {\n            return html`<li\n              >${new Intl.DateTimeFormat(this.locale, {\n                weekday: 'short',\n              }).format(new Date(2018, 0, day))}\n            </li>`\n          }\n        )}\n      </ul>\n\n      <!-- start of calendar -->\n      <ol class=\"calendar grid\">\n        <!-- previous month -->\n        ${this.getCalendarPreMonthDays()}\n        <!-- current days -->\n        ${repeat(\n          Array.from({ length: this.numberOfDays }, (_, i) => i + 1),\n          (day) => day,\n          (day) => {\n            return html`<li\n              ><button\n                class=\"day${this.selectedDate?.getTime() ===\n                new Date(\n                  this.date.getFullYear(),\n                  this.date.getMonth(),\n                  day\n                ).getTime()\n                  ? ' selected'\n                  : ''}${new Date(\n                  this.date.getFullYear(),\n                  this.date.getMonth(),\n                  day\n                ).getTime() === new Date().setHours(0, 0, 0, 0)\n                  ? ' today'\n                  : ''}\"\n                aria-label=\"Choose ${new Date(\n                  this.date.getFullYear(),\n                  this.date.getMonth(),\n                  day\n                ).toLocaleDateString(this.locale, {\n                  weekday: 'long',\n                  year: 'numeric',\n                  month: 'short',\n                  day: 'numeric',\n                })}\"\n                @click=\"${() => this.handleSelectDay({ day })}\"\n                >${day}</button\n              ></li\n            >`\n          }\n        )}\n        <!-- next month -->\n        ${this.getCalendarRemaningDays()}\n      </ol>\n      <slot></slot>\n      <div class=\"triangle\"></div>\n    `\n  }\n\n  private handleSelectDay({\n    year = this.date.getFullYear(),\n    month = this.date.getMonth(),\n    day,\n  }: {\n    day: number\n    month?: number\n    year?: number\n  }) {\n    // this.selectedDate = new Date(year, month, day)\n    this.dispatchEvent(\n      new CustomEvent('selected-date-changed', {\n        detail: new Date(year, month, day),\n        composed: true,\n      })\n    )\n  }\n\n  private getCalendarPreMonthDays() {\n    return repeat(\n      Array.from(\n        {\n          length: this.getCalendarStartDay().getDay(),\n        },\n        (_, i) => {\n          return (\n            this.numberOfDaysLastMonth -\n            this.getCalendarStartDay().getDay() +\n            1 +\n            i\n          )\n        }\n      ),\n      (day) => day,\n      (day) => {\n        return html`<li class=\"day \"\n          ><button\n            class=\"prevmonth\"\n            @click=\"${() => {\n              this.handleSelectDay({ month: this.date.getMonth() - 1, day })\n              this.dispatchEvent(\n                new Event('prev-month', { bubbles: true, composed: true })\n              )\n            }}\"\n            >${day}</button\n          ></li\n        >`\n      }\n    )\n  }\n\n  private getCalendarRemaningDays() {\n    if ((this.numberOfDays + this.calendarMonthStartsOn()) % 7 === 0) {\n      return ''\n    }\n    return repeat(\n      Array.from(\n        {\n          length:\n            7 -\n            new Date(\n              this.date.getFullYear(),\n              this.date.getMonth(),\n              this.numberOfDays + 1\n            ).getDay(),\n        },\n        (_, i) => i\n      ),\n      (day) => day,\n      (day) => {\n        return html`<li class=\"day\"\n          ><button\n            class=\"nextmonth\"\n            @click=\"${() => {\n              this.handleSelectDay({\n                month: this.date.getMonth() + 1,\n                day: day + 1,\n              })\n              this.dispatchEvent(\n                new Event('next-month', { bubbles: true, composed: true })\n              )\n            }}\"\n            >${day + 1}</button\n          ></li\n        >`\n      }\n    )\n  }\n\n  private calendarMonthStartsOn({\n    year = this.date.getFullYear(),\n    month = this.date.getMonth(),\n  } = {}) {\n    return new Date(year, month, 1).getDay()\n  }\n\n  private getCalendarStartDay(date?: Date) {\n    const aDate = date ?? this.date\n    return new Date(aDate.getFullYear(), aDate.getMonth(), 1)\n    /* .toLocaleString('default', {\n      weekday: 'long',\n    }) */\n  }\n\n  // private _onClick() {\n  //   this.count++\n  //   this.dispatchEvent(new CustomEvent('count-changed'))\n  // }\n\n  /**\n   * Formats a greeting\n   * @param name The name to say \"Hello\" to\n   */\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'datepicker-calendar': DatepickerCalendar\n  }\n}\n"]}